"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[5445],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>g});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=n.createContext({}),c=function(e){var t=n.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):s(s({},t),e)),r},u=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),p=c(r),m=a,g=p["".concat(l,".").concat(m)]||p[m]||d[m]||o;return r?n.createElement(g,s(s({ref:t},u),{},{components:r})):n.createElement(g,s({ref:t},u))}));function g(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,s=new Array(o);s[0]=m;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[p]="string"==typeof e?e:a,s[1]=i;for(var c=2;c<o;c++)s[c]=r[c];return n.createElement.apply(null,s)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},13905:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>c});var n=r(87462),a=(r(67294),r(3905));const o={sidebar_position:4,sidebar_label:"How to add a test stack trace to a description automatically"},s="How to add a test stack trace to a description automatically",i={unversionedId:"issues-troubleshooting/HowToAddATestStackTraceToADescriptionAutomatically",id:"issues-troubleshooting/HowToAddATestStackTraceToADescriptionAutomatically",title:"How to add a test stack trace to a description automatically",description:"You can make your process of a test analysis more convenient and quick by adding a description for failed tests that will include a last error message from the test log.",source:"@site/docs/issues-troubleshooting/HowToAddATestStackTraceToADescriptionAutomatically.mdx",sourceDirName:"issues-troubleshooting",slug:"/issues-troubleshooting/HowToAddATestStackTraceToADescriptionAutomatically",permalink:"/docs/issues-troubleshooting/HowToAddATestStackTraceToADescriptionAutomatically",draft:!1,editUrl:"https://github.com/reportportal/docs/blob/develop/docs/issues-troubleshooting/HowToAddATestStackTraceToADescriptionAutomatically.mdx",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,sidebar_label:"How to add a test stack trace to a description automatically"},sidebar:"defaultSidebar",previous:{title:"How to avoid local execution reported into project space",permalink:"/docs/issues-troubleshooting/HowToAvoidLocalExecutionReportedIntoProjectSpace"},next:{title:"Issues with LDAPS: how to resolve",permalink:"/docs/issues-troubleshooting/IssuesWithLDAPSHowToResolve"}},l={},c=[],u={toc:c},p="wrapper";function d(e){let{components:t,...o}=e;return(0,a.kt)(p,(0,n.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"how-to-add-a-test-stack-trace-to-a-description-automatically"},"How to add a test stack trace to a description automatically"),(0,a.kt)("p",null,"You can make your process of a test analysis more convenient and quick by adding a description for failed tests that will include a last error message from the test log."),(0,a.kt)("p",null,"You will not need to open an every single test to see the failure reason. With this new functionality you will see test failures reasons right in a table on All launches (step level), so that you can perform group actions to items."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"How to activate this option:")),(0,a.kt)("p",null,"Change your listener to wrap log messages on error level with special text:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-error"},"    <place your error message here>\n")),(0,a.kt)("media-view",{src:r(49584),alt:"Add a description for failed tests automatically in our test report dashboard"}),(0,a.kt)("p",null,"We have prepared an example how to extend a TestNG agent, and you can find it below:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"An extend agent service:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},'    public static class ParamTaggingTestNgService extends TestNGService {\n\n        public ParamTaggingTestNgService(ListenerParameters parameters, ReportPortalClient reportPortalClient) {\n            super(parameters, reportPortalClient);\n        }\n\n        @Override\n        protected StartTestItemRQ buildStartStepRq(ITestResult testResult) {\n            final StartTestItemRQ rq = super.buildStartStepRq(testResult);\n            if (testResult.getParameters() != null && testResult.getParameters().length != 0) {\n                final Set<String> tags = Optional.fromNullable(rq.getTags()).or(new HashSet<>());\n                for (Object param : testResult.getParameters()) {\n                    tags.add(param.toString());\n                }\n                rq.setTags(tags);\n\n            }\n            return rq;\n        }\n\n        @Override\n        protected FinishTestItemRQ buildFinishTestMethodRq(String status, ITestResult testResult) {\n            FinishTestItemRQ finishTestItemRQ = super.buildFinishTestMethodRq(status, testResult);\n            if (testResult.getThrowable() != null) {\n                String description =\n                        "```error\\n"\n                                + Throwables.getStackTraceAsString(testResult.getThrowable())\n                                + "\\n```";\n                description = description + Throwables.getStackTraceAsString(testResult.getThrowable());\n                finishTestItemRQ.setDescription(description);\n            }\n            return finishTestItemRQ;\n        }\n    }\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"An extend listener with your extended service:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-java"},"    public static class ExtendedListener extends BaseTestNGListener {\n        public ExtendedListener() {\n            super(override(new TestNGAgentModule()).with((Module) binder -> binder.bind(ITestNGService.class)\n                    .toProvider(new TestNGProvider() {\n                        @Override\n                        protected TestNGService createTestNgService(ListenerParameters listenerParameters,\n                                ReportPortalClient reportPortalClient) {\n                            return new ParamTaggingTestNgService(listenerParameters, reportPortalClient);\n                        }\n                    })));\n        }\n    }\n")))}d.isMDXComponent=!0},49584:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});const n=r.p+"assets/images/TipAndTricksStackTrace-894edf8a0ae594e25597cd6305131c43.png"}}]);