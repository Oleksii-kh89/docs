"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[2106],{3905:(e,t,o)=>{o.d(t,{Zo:()=>p,kt:()=>k});var r=o(67294);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function i(e,t){if(null==e)return{};var o,r,n=function(e,t){if(null==e)return{};var o,r,n={},a=Object.keys(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var s=r.createContext({}),c=function(e){var t=r.useContext(s),o=t;return e&&(o="function"==typeof e?e(t):l(l({},t),e)),o},p=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var o=e.components,n=e.mdxType,a=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=c(o),d=n,k=u["".concat(s,".").concat(d)]||u[d]||m[d]||a;return o?r.createElement(k,l(l({ref:t},p),{},{components:o})):r.createElement(k,l({ref:t},p))}));function k(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=o.length,l=new Array(a);l[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[u]="string"==typeof e?e:n,l[1]=i;for(var c=2;c<a;c++)l[c]=o[c];return r.createElement.apply(null,l)}return r.createElement.apply(null,o)}d.displayName="MDXCreateElement"},49538:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>m,frontMatter:()=>a,metadata:()=>i,toc:()=>c});var r=o(87462),n=(o(67294),o(3905));const a={sidebar_position:3,sidebar_label:"Deploy with Docker on Linux/Mac",description:"Make your test automation reporting more portable. Reduce the risk of configuration issues with your test reporting tool using Docker."},l="Deploy with Docker on Linux/Mac",i={unversionedId:"installation-steps/DeployWithDockerOnLinuxMac",id:"installation-steps/DeployWithDockerOnLinuxMac",title:"Deploy with Docker on Linux/Mac",description:"Make your test automation reporting more portable. Reduce the risk of configuration issues with your test reporting tool using Docker.",source:"@site/docs/installation-steps/DeployWithDockerOnLinuxMac.md",sourceDirName:"installation-steps",slug:"/installation-steps/DeployWithDockerOnLinuxMac",permalink:"/docs/installation-steps/DeployWithDockerOnLinuxMac",draft:!1,editUrl:"https://github.com/reportportal/docs/blob/develop/docs/installation-steps/DeployWithDockerOnLinuxMac.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,sidebar_label:"Deploy with Docker on Linux/Mac",description:"Make your test automation reporting more portable. Reduce the risk of configuration issues with your test reporting tool using Docker."},sidebar:"defaultSidebar",previous:{title:"Basic monitoring configuration",permalink:"/docs/installation-steps/BasicMonitoringConfiguration"},next:{title:"Deploy with Docker on Windows",permalink:"/docs/installation-steps/DeployWithDockerOnWindows"}},s={},c=[{value:"Install Docker",id:"install-docker",level:2},{value:"Deploy ReportPortal with Docker",id:"deploy-reportportal-with-docker",level:2},{value:"Optional Customisation",id:"optional-customisation",level:2}],p={toc:c},u="wrapper";function m(e){let{components:t,...o}=e;return(0,n.kt)(u,(0,r.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"deploy-with-docker-on-linuxmac"},"Deploy with Docker on Linux/Mac"),(0,n.kt)("p",null,"ReportPortal can be easily deployed using Docker Compose."),(0,n.kt)("h2",{id:"install-docker"},"Install Docker"),(0,n.kt)("p",null,"Docker is supported by all major Linux distributions, MacOS and Windows."),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://www.docker.com/get-started"},"Download")," Docker"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"https://docs.docker.com/compose/install/"},"Download")," Docker Compose")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u26a0\ufe0f Recomended change resources limits at least ",(0,n.kt)("strong",{parentName:"p"},"2")," CPU ",(0,n.kt)("strong",{parentName:"p"},"5")," GB RAM for Docker Desktop: ",(0,n.kt)("a",{parentName:"p",href:"https://docs.docker.com/desktop/settings/mac/#advanced"},"MAC")," | ",(0,n.kt)("a",{parentName:"p",href:"https://docs.docker.com/desktop/settings/windows/#advanced"},"Windows")," | ",(0,n.kt)("a",{parentName:"p",href:"https://docs.docker.com/desktop/settings/linux/#advanced"},"Linux"))),(0,n.kt)("h2",{id:"deploy-reportportal-with-docker"},"Deploy ReportPortal with Docker"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Download the latest ReportPortal Docker Compose file from ",(0,n.kt)("a",{parentName:"li",href:"https://github.com/reportportal/reportportal/blob/master/docker-compose.yml"},"here"),". You can make it by run the following command:")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"curl -LO https://raw.githubusercontent.com/reportportal/reportportal/master/docker-compose.yml\n")),(0,n.kt)("p",null,"Ensure you override the UAT Service environment variable ",(0,n.kt)("inlineCode",{parentName:"p"},"RP_INITIAL_ADMIN_PASSWORD"),"."),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},"Start the application using the following command:")),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose -p reportportal up -d --force-recreate\n")),(0,n.kt)("p",null,"Where:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"-p reportportal")," adds project prefix 'reportportal' to all containers"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"up")," creates and starts containers"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"-d")," daemon mode"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"--force-recreate")," Re-creates containers if there any")),(0,n.kt)("p",null,"Useful commands:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"docker-compose logs")," shows logs from all containers"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"docker logs ","<","container_name",">")," shows logs from selected container"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"docker ps -a | grep \"reportportal_\" | awk '{print $1}' | xargs docker rm -f")," Deletes all ReportPortal containers"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"docker-compose down"))),(0,n.kt)("ol",{start:3},(0,n.kt)("li",{parentName:"ol"},"Open your web browser with an IP address of the deployed environment at port ",(0,n.kt)("strong",{parentName:"li"},"8080"))),(0,n.kt)("p",null,"Use the following ",(0,n.kt)("strong",{parentName:"p"},"login\\pass")," to access:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Default User: ",(0,n.kt)("inlineCode",{parentName:"li"},"default\\1q2w3e")),(0,n.kt)("li",{parentName:"ul"},"Administrator: ",(0,n.kt)("inlineCode",{parentName:"li"},"superadmin\\erebus"))),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"\u26a0\ufe0f Please change the admin password for better security")),(0,n.kt)("h2",{id:"optional-customisation"},"Optional Customisation"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"Expose Docker Volumes to the file system")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"OPTIONAL: Set {vm.max_map_count} kernel setting before ReportPortal deploying with the following ",(0,n.kt)("a",{parentName:"p",href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.10/docker.html#docker-cli-run-prod-mode"},"Commands"))),(0,n.kt)("p",null,"Give the right permissions to the ElasticSearch data folder using the following commands:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir -p data/elasticsearch\nchmod 775 data/elasticsearch\nchgrp 1000 data/elasticsearch\n")),(0,n.kt)("blockquote",null,(0,n.kt)("p",{parentName:"blockquote"},"For more details about ElasticSearch visit ElasticSearch ",(0,n.kt)("a",{parentName:"p",href:"https://www.elastic.co/guide/en/elasticsearch/reference/7.10/docker.html#_notes_for_production_use_and_defaults"},"guide"))),(0,n.kt)("ol",{start:2},(0,n.kt)("li",{parentName:"ol"},"PostgreSQL Performance Tuning")),(0,n.kt)("p",null,'Depending on your hardware configuration and the parameters of your system, you can additionally optimize your PostgreSQL performance by adding the following parameters to the "command" option in the Docker compose file:'),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"}," -c effective_io_concurrency=\n -c shared_buffers=\n -c max_connections=\n -c effective_cache_size=\n -c maintenance_work_mem=\n -c random_page_cost=\n -c seq_page_cost= \n -c min_wal_size= \n -c max_wal_size=\n -c max_worker_processes=\n -c max_parallel_workers_per_gather=\n")),(0,n.kt)("p",null,"Please choose to set the values of these variables that are right for your system. You can also change the PostgreSQL host by passing a new value to the ",(0,n.kt)("inlineCode",{parentName:"p"},"POSTGRES_SERVER")," environment ",(0,n.kt)("a",{parentName:"p",href:"./AdditionalConfigurationParameters"},"variable"),"."),(0,n.kt)("p",null,"More info can be found at the following ",(0,n.kt)("a",{parentName:"p",href:"./OptimalPerformanceHardwareSetup#5-postgresql-performance-tuning"},"link")))}m.isMDXComponent=!0}}]);